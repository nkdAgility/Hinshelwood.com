{{- $pages := .pages -}}
{{- $limit := .limit | default 0 -}}
{{- $truncate := .truncate | default 0 -}}
{{- $layout := .layout | default "list" -}}
{{- $showBadges := .showBadges | default false -}}

{{- if gt $limit 0 -}}
  {{- $pages = first $limit $pages -}}
{{- end -}}

{{- if eq $layout "grid" -}}
  <div class="row g-4">
    {{- range $pages -}}
      <div class="col-12">
        {{ partial "components/social-proof.html" (dict "page" . "truncate" $truncate "showBadges" $showBadges) }}
      </div>
    {{- end -}}
  </div>
{{- else -}}
  <div>
    {{- range $pages -}}
      <div class="mb-2 pb-2 border-bottom">
        {{ partial "components/social-proof.html" (dict "page" . "truncate" $truncate "showBadges" $showBadges) }}
      </div>
    {{- end -}}
  </div>
{{- end -}}
 <script>
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.quote-toggle').forEach(function(btn) {
      let expanded = false;
      const fullText = btn.getAttribute('data-full-text');
      const shortText = btn.getAttribute('data-short-text');
      const textSpan = btn.previousElementSibling;
      
      btn.addEventListener('click', function() {
        expanded = !expanded;
        if (expanded) {
          textSpan.textContent = fullText;
          btn.textContent = 'less';
        } else {
          textSpan.textContent = shortText + '...';
          btn.textContent = 'more...';
        }
      });
    });
  });
  </script>
